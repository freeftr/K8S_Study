# Section 09 Pod Networking

### Pod 네트워킹이 필요한 이유
- 쿠버네티스는 Pod 단위 네트워킹을 필요로 함.
  - 각 Pod는 고유한 IP를 가져야 함.
  - 같은 노드 내 Pod 간에는 해당 IP로 통신 가능해야 함.
  - 다른 노드의 Pod와도 동일한 IP 체계로 직접 통신 가능해야 함.
  - NAT 규칙 없이 직접 통신 가능해야 함.

## Pod 네트워크 구축

### 수동
1. Bridge 생성: 가 노드에 Bridge 네트워크 생성
2. Container 연결
   - `ip link add`: veth 쌍 생성
   - 한쪽은 pod 네임스페이스, 한쪽은 bridge에
   - `ip addr`: Pod에 고유 IP 할당
   - 기본 게이트웨이 라우트 추가
3. 노드 간 라우팅
   - Pod 간 다른 서브넷 통신을 위해 각 노드 라우팅 테이블에 경로 추가
   - 규모가 커질 경우 라우터에서 관리하는 것이 효율적.

### Pod 네트워크 통합
- 노드별 서브넷을 하나의 대역으로 묶는다. => 단일 대역 내에서 모든 Pod가 IP 기반 통신 가능.

### 자동
- CNI로 자동으로 가능.
  - `ADD`: Pod 생성 시 네트워크 연결 및 IP 할당
  - `DEL`: Pod 삭제 시, 인터페이스 제거 및 IP 할당
- 컨테이너 런타임은 pod 생성 시 CNI를 참조하여 플러그인 실행
- 플러그인은 Pod 네트워킹을 표준 방식으로 처리.